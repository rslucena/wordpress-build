!function(d){var c=acf.Field.extend({type:"repeater",wait:"",events:{'click a[data-event="add-row"]':"onClickAdd",'click a[data-event="remove-row"]':"onClickRemove",'click a[data-event="collapse-row"]':"onClickCollapse",showField:"onShow",unloadField:"onUnload",mouseover:"onHover",unloadField:"onUnload"},$control:function(){return this.$(".acf-repeater:first")},$table:function(){return this.$("table:first")},$tbody:function(){return this.$("tbody:first")},$rows:function(){return this.$("tbody:first > tr").not(".acf-clone")},$row:function(a){return this.$("tbody:first > tr:eq("+a+")")},$clone:function(){return this.$("tbody:first > tr.acf-clone")},$actions:function(){return this.$(".acf-actions:last")},$button:function(){return this.$(".acf-actions:last .button")},getValue:function(){return this.$rows().length},allowRemove:function(){var a=parseInt(this.get("min"));return !a||a<this.val()},allowAdd:function(){var a=parseInt(this.get("max"));return !a||a>this.val()},addSortable:function(e){1!=this.get("max")&&this.$tbody().sortable({items:"> tr",handle:"> td.order",forceHelperSize:!0,forcePlaceholderSize:!0,scroll:!0,stop:function(a,f){e.render()},update:function(a,f){e.$input().trigger("change")}})},addCollapsed:function(){var a=b.load(this.get("key"));if(!a){return !1}this.$rows().each(function(e){-1<a.indexOf(e)&&d(this).addClass("-collapsed")})},addUnscopedEvents:function(e){this.on("invalidField",".acf-row",function(a){var f=d(this);e.isCollapsed(f)&&e.expand(f)})},initialize:function(){this.addUnscopedEvents(this),this.addCollapsed(),acf.disable(this.$clone(),this.cid),this.render()},render:function(){this.$rows().each(function(a){d(this).find("> .order > span").html(a+1)}),0==this.val()?this.$control().addClass("-empty"):this.$control().removeClass("-empty"),this.allowAdd()?this.$button().removeClass("disabled"):this.$button().addClass("disabled")},validateAdd:function(){if(this.allowAdd()){return !0}var a=this.get("max"),f=acf.__("Maximum rows reached ({max} rows)");return f=f.replace("{max}",a),this.showNotice({text:f,type:"warning"}),!1},onClickAdd:function(a,f){if(!this.validateAdd()){return !1}f.hasClass("acf-icon")?this.add({before:f.closest(".acf-row")}):this.add()},add:function(e){if(!this.allowAdd()){return !1}e=acf.parseArgs(e,{before:!1});var f=acf.duplicate({target:this.$clone(),append:this.proxy(function(a,g){e.before?e.before.before(g):a.before(g),g.removeClass("acf-clone"),acf.enable(g,this.cid),this.render()})});return this.$input().trigger("change"),f},validateRemove:function(){if(this.allowRemove()){return !0}var a=this.get("min"),f=acf.__("Minimum rows reached ({min} rows)");return f=f.replace("{min}",a),this.showNotice({text:f,type:"warning"}),!1},onClickRemove:function(h,j){var f=j.closest(".acf-row");f.addClass("-hover");var g=acf.newTooltip({confirmRemove:!0,target:j,context:this,confirm:function(){this.remove(f)},cancel:function(){f.removeClass("-hover")}})},remove:function(a){var f=this;acf.remove({target:a,endHeight:0,complete:function(){f.$input().trigger("change"),f.render()}})},isCollapsed:function(a){return a.hasClass("-collapsed")},collapse:function(a){a.addClass("-collapsed"),acf.doAction("hide",a,"collapse")},expand:function(a){a.removeClass("-collapsed"),acf.doAction("show",a,"collapse")},onClickCollapse:function(h,j){var f=j.closest(".acf-row"),g=this.isCollapsed(f);h.shiftKey&&(f=this.$rows()),g?this.expand(f):this.collapse(f)},onShow:function(h,j,f){var g=acf.getFields({is:":visible",parent:this.$el});acf.doAction("show_fields",g)},onUnload:function(){var a=[];this.$rows().each(function(e){d(this).hasClass("-collapsed")&&a.push(e)}),a=a.length?a:null,b.save(this.get("key"),a)},onHover:function(){this.addSortable(this),this.off("mouseover")}});acf.registerFieldType(c),acf.registerConditionForFieldType("hasValue","repeater"),acf.registerConditionForFieldType("hasNoValue","repeater"),acf.registerConditionForFieldType("lessThan","repeater"),acf.registerConditionForFieldType("greaterThan","repeater");var b=new acf.Model({name:"this.collapsedRows",key:function(g,h){var f=this.get(g+h)||0;return f++,this.set(g+h,f,!0),1<f&&(g+="-"+f),g},load:function(a){var a=this.key(a,"load"),f=acf.getPreference(this.name);return !(!f||!f[a])&&f[a]},save:function(g,h){var g=this.key(g,"save"),f=acf.getPreference(this.name)||{};null===h?delete f[g]:f[g]=h,d.isEmptyObject(f)&&(f=null),acf.setPreference(this.name,f)}})}(jQuery),function(f){var d=acf.Field.extend({type:"flexible_content",wait:"",events:{'click [data-name="add-layout"]':"onClickAdd",'click [data-name="remove-layout"]':"onClickRemove",'click [data-name="collapse-layout"]':"onClickCollapse",showField:"onShow",unloadField:"onUnload",mouseover:"onHover"},$control:function(){return this.$(".acf-flexible-content:first")},$layoutsWrap:function(){return this.$(".acf-flexible-content:first > .values")},$layouts:function(){return this.$(".acf-flexible-content:first > .values > .layout")},$layout:function(a){return this.$(".acf-flexible-content:first > .values > .layout:eq("+a+")")},$clonesWrap:function(){return this.$(".acf-flexible-content:first > .clones")},$clones:function(){return this.$(".acf-flexible-content:first > .clones  > .layout")},$clone:function(a){return this.$('.acf-flexible-content:first > .clones  > .layout[data-layout="'+a+'"]')},$actions:function(){return this.$(".acf-actions:last")},$button:function(){return this.$(".acf-actions:last .button")},$popup:function(){return this.$(".tmpl-popup:last")},getPopupHTML:function(){var g=this.$popup().html(),i=f(g),c=this.$layouts(),h=function(a){return c.filter(function(){return f(this).data("layout")===a}).length};return i.find("[data-layout]").each(function(){var p=f(this),r=p.data("min")||0,k=p.data("max")||0,m=p.data("layout")||"",v=h(m);if(k&&k<=v){p.addClass("disabled")}else{if(r&&v<r){var u=r-v,q=acf.__("{required} {label} {identifier} required (min {min})"),j=acf._n("layout","layouts",u);q=(q=(q=(q=q.replace("{required}",u)).replace("{label}",m)).replace("{identifier}",j)).replace("{min}",r),p.append('<span class="badge" title="'+q+'">'+u+"</span>")}}}),g=i.outerHTML()},getValue:function(){return this.$layouts().length},allowRemove:function(){var a=parseInt(this.get("min"));return !a||a<this.val()},allowAdd:function(){var a=parseInt(this.get("max"));return !a||a>this.val()},isFull:function(){var a=parseInt(this.get("max"));return a&&this.val()>=a},addSortable:function(c){1!=this.get("max")&&this.$layoutsWrap().sortable({items:"> .layout",handle:"> .acf-fc-layout-handle",forceHelperSize:!0,forcePlaceholderSize:!0,scroll:!0,stop:function(a,g){c.render()},update:function(a,g){c.$input().trigger("change")}})},addCollapsed:function(){var a=b.load(this.get("key"));if(!a){return !1}this.$layouts().each(function(c){-1<a.indexOf(c)&&f(this).addClass("-collapsed")})},addUnscopedEvents:function(a){this.on("invalidField",".layout",function(c){a.onInvalidField(c,f(this))})},initialize:function(){this.addUnscopedEvents(this),this.addCollapsed(),acf.disable(this.$clonesWrap(),this.cid),this.render()},render:function(){this.$layouts().each(function(a){f(this).find(".acf-fc-layout-order:first").html(a+1)}),0==this.val()?this.$control().addClass("-empty"):this.$control().removeClass("-empty"),this.isFull()?this.$button().addClass("disabled"):this.$button().removeClass("disabled")},onShow:function(h,j,c){var g=acf.getFields({is:":visible",parent:this.$el});acf.doAction("show_fields",g)},validateAdd:function(){if(this.allowAdd()){return !0}var g=this.get("max"),h=acf.__("This field has a limit of {max} {label} {identifier}"),c=acf._n("layout","layouts",g);return h=(h=(h=h.replace("{max}",g)).replace("{label}","")).replace("{identifier}",c),this.showNotice({text:h,type:"warning"}),!1},onClickAdd:function(h,j){if(!this.validateAdd()){return !1}var c=null,g;j.hasClass("acf-icon")&&(c=j.closest(".layout")).addClass("-hover"),new e({target:j,targetConfirm:!1,text:this.getPopupHTML(),context:this,confirm:function(a,i){i.hasClass("disabled")||this.add({layout:i.data("layout"),before:c})},cancel:function(){c&&c.removeClass("-hover")}}).on("click","[data-layout]","onConfirm")},add:function(c){if(c=acf.parseArgs(c,{layout:"",before:!1}),!this.allowAdd()){return !1}var g=acf.duplicate({target:this.$clone(c.layout),append:this.proxy(function(a,h){c.before?c.before.before(h):this.$layoutsWrap().append(h),acf.enable(h,this.cid),this.render()})});return this.$input().trigger("change"),g},validateRemove:function(){if(this.allowRemove()){return !0}var g=this.get("min"),h=acf.__("This field requires at least {min} {label} {identifier}"),c=acf._n("layout","layouts",g);return h=(h=(h=h.replace("{min}",g)).replace("{label}","")).replace("{identifier}",c),this.showNotice({text:h,type:"warning"}),!1},onClickRemove:function(h,j){var c=j.closest(".layout");c.addClass("-hover");var g=acf.newTooltip({confirmRemove:!0,target:j,context:this,confirm:function(){this.removeLayout(c)},cancel:function(){c.removeClass("-hover")}})},removeLayout:function(g){var h=this,c=1==this.getValue()?60:0;acf.remove({target:g,endHeight:c,complete:function(){h.$input().trigger("change"),h.render()}})},onClickCollapse:function(g,h){var c=h.closest(".layout");this.isLayoutClosed(c)?this.openLayout(c):this.closeLayout(c)},isLayoutClosed:function(a){return a.hasClass("-collapsed")},openLayout:function(a){a.removeClass("-collapsed"),acf.doAction("show",a,"collapse")},closeLayout:function(a){a.addClass("-collapsed"),acf.doAction("hide",a,"collapse"),this.renderLayout(a)},renderLayout:function(j){var h,c=j.children("input").attr("name").replace("[acf_fc_layout]",""),g={action:"acf/fields/flexible_content/layout_title",field_key:this.get("key"),i:j.index(),layout:j.data("layout"),value:acf.serialize(j,c)};f.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(g),dataType:"html",type:"post",success:function(a){a&&j.children(".acf-fc-layout-handle").html(a)}})},onUnload:function(){var a=[];this.$layouts().each(function(c){f(this).hasClass("-collapsed")&&a.push(c)}),a=a.length?a:null,b.save(this.get("key"),a)},onInvalidField:function(a,c){this.isLayoutClosed(c)&&this.openLayout(c)},onHover:function(){this.addSortable(this),this.off("mouseover")}});acf.registerFieldType(d);var e=acf.models.TooltipConfirm.extend({events:{"click [data-layout]":"onConfirm",'click [data-event="cancel"]':"onCancel"},render:function(){this.html(this.get("text")),this.$el.addClass("acf-fc-popup")}});acf.registerConditionForFieldType("hasValue","flexible_content"),acf.registerConditionForFieldType("hasNoValue","flexible_content"),acf.registerConditionForFieldType("lessThan","flexible_content"),acf.registerConditionForFieldType("greaterThan","flexible_content");var b=new acf.Model({name:"this.collapsedLayouts",key:function(g,h){var c=this.get(g+h)||0;return c++,this.set(g+h,c,!0),1<c&&(g+="-"+c),g},load:function(a){var a=this.key(a,"load"),c=acf.getPreference(this.name);return !(!c||!c[a])&&c[a]},save:function(g,h){var g=this.key(g,"save"),c=acf.getPreference(this.name)||{};null===h?delete c[g]:c[g]=h,f.isEmptyObject(c)&&(c=null),acf.setPreference(this.name,c)}})}(jQuery),function(b){var a=acf.Field.extend({type:"gallery",events:{"click .acf-gallery-add":"onClickAdd","click .acf-gallery-edit":"onClickEdit","click .acf-gallery-remove":"onClickRemove","click .acf-gallery-attachment":"onClickSelect","click .acf-gallery-close":"onClickClose","change .acf-gallery-sort":"onChangeSort","click .acf-gallery-update":"onUpdate",mouseover:"onHover",showField:"render"},actions:{validation_begin:"onValidationBegin",validation_failure:"onValidationFailure",resize:"onResize"},onValidationBegin:function(){acf.disable(this.$sideData(),this.cid)},onValidationFailure:function(){acf.enable(this.$sideData(),this.cid)},$control:function(){return this.$(".acf-gallery")},$collection:function(){return this.$(".acf-gallery-attachments")},$attachments:function(){return this.$(".acf-gallery-attachment")},$attachment:function(c){return this.$('.acf-gallery-attachment[data-id="'+c+'"]')},$active:function(){return this.$(".acf-gallery-attachment.active")},$main:function(){return this.$(".acf-gallery-main")},$side:function(){return this.$(".acf-gallery-side")},$sideData:function(){return this.$(".acf-gallery-side-data")},isFull:function(){var c=parseInt(this.get("max")),d=this.$attachments().length;return c&&c<=d},getValue:function(){var c=[];return this.$attachments().each(function(){c.push(b(this).data("id"))}),!!c.length&&c},addUnscopedEvents:function(c){this.on("change",".acf-gallery-side",function(d){c.onUpdate(d,b(this))})},addSortable:function(c){this.$collection().sortable({items:".acf-gallery-attachment",forceHelperSize:!0,forcePlaceholderSize:!0,scroll:!0,start:function(d,f){f.placeholder.html(f.item.html()),f.placeholder.removeAttr("style")},update:function(d,f){c.$input().trigger("change")}}),this.$control().resizable({handles:"s",minHeight:200,stop:function(d,f){acf.update_user_setting("gallery_height",f.size.height)}})},initialize:function(){this.addUnscopedEvents(this),this.render()},render:function(){var d=this.$(".acf-gallery-sort"),f=this.$(".acf-gallery-add"),c=this.$attachments().length;this.isFull()?f.addClass("disabled"):f.removeClass("disabled"),c?d.removeClass("disabled"):d.addClass("disabled"),this.resize()},resize:function(){var d=this.$control().width(),f=150,c=Math.round(d/f);c=Math.min(c,8),this.$control().attr("data-columns",c)},onResize:function(){this.resize()},openSidebar:function(){this.$control().addClass("-open");var c=this.$control().width()/3;c=parseInt(c),c=Math.max(c,350),this.$(".acf-gallery-side-inner").css({width:c-1}),this.$side().animate({width:c-1},250),this.$main().animate({right:c},250)},closeSidebar:function(){this.$control().removeClass("-open"),this.$active().removeClass("active"),acf.disable(this.$side());var c=this.$(".acf-gallery-side-data");this.$main().animate({right:0},250),this.$side().animate({width:0},250,function(){c.html("")})},onClickAdd:function(d,f){if(this.isFull()){this.showNotice({text:acf.__("Maximum selection reached"),type:"warning"})}else{var c=acf.newMediaPopup({mode:"select",title:acf.__("Add Image to Gallery"),field:this.get("key"),multiple:"add",library:this.get("library"),allowedTypes:this.get("mime_types"),selected:this.val(),select:b.proxy(function(g,h){this.appendAttachment(g,h)},this)})}},appendAttachment:function(f,g){if(f=this.validateAttachment(f),!this.isFull()&&!this.$attachment(f.id).length){var c=['<div class="acf-gallery-attachment" data-id="'+f.id+'">','<input type="hidden" value="'+f.id+'" name="'+this.getInputName()+'[]">','<div class="margin" title="">','<div class="thumbnail">','<img src="" alt="">',"</div>",'<div class="filename"></div>',"</div>",'<div class="actions">','<a href="#" class="acf-icon -cancel dark acf-gallery-remove" data-id="'+f.id+'"></a>',"</div>","</div>"].join(""),d=b(c);if(this.$collection().append(d),"prepend"===this.get("insert")){var h=this.$attachments().eq(g);h.length&&h.before(d)}this.renderAttachment(f),this.render(),this.$input().trigger("change")}},validateAttachment:function(c){if((c=acf.parseArgs(c,{id:"",url:"",alt:"",title:"",filename:"",type:"image"})).attributes){c=c.attributes;var d=acf.isget(c,"sizes","medium","url");null!==d&&(c.url=d)}return c},renderAttachment:function(c){c=this.validateAttachment(c);var d=this.$attachment(c.id);"image"==c.type?d.find(".filename").remove():(c.url=acf.isget(c,"thumb","src"),d.find(".filename").text(c.filename)),c.url||(c.url=acf.get("mimeTypeIcon"),d.addClass("-icon")),d.find("img").attr({src:c.url,alt:c.alt,title:c.title}),acf.val(d.find("input"),c.id)},editAttachment:function(c){var d=acf.newMediaPopup({mode:"edit",title:acf.__("Edit Image"),button:acf.__("Update Image"),attachment:c,field:this.get("key"),select:b.proxy(function(f,g){this.renderAttachment(f)},this)})},onClickEdit:function(d,f){var c=f.data("id");c&&this.editAttachment(c)},removeAttachment:function(c){this.closeSidebar(),this.$attachment(c).remove(),this.render(),this.$input().trigger("change")},onClickRemove:function(d,f){d.preventDefault(),d.stopPropagation();var c=f.data("id");c&&this.removeAttachment(c)},selectAttachment:function(c){var f=this.$attachment(c);if(!f.hasClass("active")){var g=this.proxy(function(){this.$side().find(":focus").trigger("blur"),this.$active().removeClass("active"),f.addClass("active"),this.openSidebar(),d()}),d=this.proxy(function(){var i={action:"acf/fields/gallery/get_attachment",field_key:this.get("key"),id:c};this.has("xhr")&&this.get("xhr").abort(),acf.showLoading(this.$sideData());var j=b.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(i),type:"post",dataType:"html",cache:!1,success:h});this.set("xhr",j)}),h=this.proxy(function(i){if(i){var j=this.$sideData();j.html(i),j.find(".compat-field-acf-form-data").remove(),j.find("> table.form-table > tbody").append(j.find("> .compat-attachment-fields > tbody > tr")),acf.doAction("append",j)}});g()}},onClickSelect:function(d,f){var c=f.data("id");c&&this.selectAttachment(c)},onClickClose:function(c,d){this.closeSidebar()},onChangeSort:function(f,g){var c=g.val();if(c){var d=[];this.$attachments().each(function(){d.push(b(this).data("id"))});var j=this.proxy(function(){var i={action:"acf/fields/gallery/get_sort_order",field_key:this.get("key"),ids:d,sort:c},k=b.ajax({url:acf.get("ajaxurl"),dataType:"json",type:"post",cache:!1,data:acf.prepareForAjax(i),success:h})}),h=this.proxy(function(e){acf.isAjaxSuccess(e)&&(e.data.reverse(),e.data.map(function(i){this.$collection().prepend(this.$attachment(i))},this))});j()}},onUpdate:function(f,g){var c=this.$(".acf-gallery-update");if(!c.hasClass("disabled")){var d=acf.serialize(this.$sideData());c.addClass("disabled"),c.before('<i class="acf-loading"></i> '),d.action="acf/fields/gallery/update_attachment",b.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(d),type:"post",dataType:"json",complete:function(){c.removeClass("disabled"),c.prev(".acf-loading").remove()}})}},onHover:function(){this.addSortable(this),this.off("mouseover")}});acf.registerFieldType(a),acf.registerConditionForFieldType("hasValue","gallery"),acf.registerConditionForFieldType("hasNoValue","gallery"),acf.registerConditionForFieldType("selectionLessThan","gallery"),acf.registerConditionForFieldType("selectionGreaterThan","gallery")}(jQuery);