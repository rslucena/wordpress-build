(function(c){var a=acf.Field.extend({type:"repeater",wait:"",events:{'click a[data-event="add-row"]':"onClickAdd",'click a[data-event="remove-row"]':"onClickRemove",'click a[data-event="collapse-row"]':"onClickCollapse",showField:"onShow",unloadField:"onUnload",mouseover:"onHover",unloadField:"onUnload"},$control:function(){return this.$(".acf-repeater:first")},$table:function(){return this.$("table:first")},$tbody:function(){return this.$("tbody:first")},$rows:function(){return this.$("tbody:first > tr").not(".acf-clone")},$row:function(d){return this.$("tbody:first > tr:eq("+d+")")},$clone:function(){return this.$("tbody:first > tr.acf-clone")},$actions:function(){return this.$(".acf-actions:last")},$button:function(){return this.$(".acf-actions:last .button")},getValue:function(){return this.$rows().length},allowRemove:function(){var d=parseInt(this.get("min"));return(!d||d<this.val())},allowAdd:function(){var d=parseInt(this.get("max"));return(!d||d>this.val())},addSortable:function(d){if(this.get("max")==1){return}this.$tbody().sortable({items:"> tr",handle:"> td.order",forceHelperSize:true,forcePlaceholderSize:true,scroll:true,stop:function(e,f){d.render()},update:function(e,f){d.$input().trigger("change")}})},addCollapsed:function(){var d=b.load(this.get("key"));if(!d){return false}this.$rows().each(function(e){if(d.indexOf(e)>-1){c(this).addClass("-collapsed")}})},addUnscopedEvents:function(d){this.on("invalidField",".acf-row",function(g){var f=c(this);if(d.isCollapsed(f)){d.expand(f)}})},initialize:function(){this.addUnscopedEvents(this);this.addCollapsed();acf.disable(this.$clone(),this.cid);this.render()},render:function(){this.$rows().each(function(f){c(this).find("> .order > span").html(f+1)});var e=this.$control();var d=this.$button();if(this.val()==0){e.addClass("-empty")}else{e.removeClass("-empty")}if(!this.allowAdd()){e.addClass("-max");d.addClass("disabled")}else{e.removeClass("-max");d.removeClass("disabled")}},validateAdd:function(){if(this.allowAdd()){return true}var d=this.get("max");var e=acf.__("Maximum rows reached ({max} rows)");e=e.replace("{max}",d);this.showNotice({text:e,type:"warning"});return false},onClickAdd:function(f,d){if(!this.validateAdd()){return false}if(d.hasClass("acf-icon")){this.add({before:d.closest(".acf-row")})}else{this.add()}},add:function(d){if(!this.allowAdd()){return false}d=acf.parseArgs(d,{before:false});var e=acf.duplicate({target:this.$clone(),append:this.proxy(function(f,g){if(d.before){d.before.before(g)}else{f.before(g)}g.removeClass("acf-clone");acf.enable(g,this.cid);this.render()})});this.$input().trigger("change");return e},validateRemove:function(){if(this.allowRemove()){return true}var d=this.get("min");var e=acf.__("Minimum rows reached ({min} rows)");e=e.replace("{min}",d);this.showNotice({text:e,type:"warning"});return false},onClickRemove:function(h,f){var d=f.closest(".acf-row");d.addClass("-hover");var g=acf.newTooltip({confirmRemove:true,target:f,context:this,confirm:function(){this.remove(d)},cancel:function(){d.removeClass("-hover")}})},remove:function(d){var e=this;acf.remove({target:d,endHeight:0,complete:function(){e.$input().trigger("change");e.render()}})},isCollapsed:function(d){return d.hasClass("-collapsed")},collapse:function(d){d.addClass("-collapsed");acf.doAction("hide",d,"collapse")},expand:function(d){d.removeClass("-collapsed");acf.doAction("show",d,"collapse")},onClickCollapse:function(h,f){var d=f.closest(".acf-row");var g=this.isCollapsed(d);if(h.shiftKey){d=this.$rows()}if(g){this.expand(d)}else{this.collapse(d)}},onShow:function(h,g,f){var d=acf.getFields({is:":visible",parent:this.$el});acf.doAction("show_fields",d)},onUnload:function(){var d=[];this.$rows().each(function(e){if(c(this).hasClass("-collapsed")){d.push(e)}});d=d.length?d:null;b.save(this.get("key"),d)},onHover:function(){this.addSortable(this);this.off("mouseover")}});acf.registerFieldType(a);acf.registerConditionForFieldType("hasValue","repeater");acf.registerConditionForFieldType("hasNoValue","repeater");acf.registerConditionForFieldType("lessThan","repeater");acf.registerConditionForFieldType("greaterThan","repeater");var b=new acf.Model({name:"this.collapsedRows",key:function(e,d){var f=this.get(e+d)||0;f++;this.set(e+d,f,true);if(f>1){e+="-"+f}return e},load:function(d){var d=this.key(d,"load");var e=acf.getPreference(this.name);if(e&&e[d]){return e[d]}else{return false}},save:function(d,f){var d=this.key(d,"save");var e=acf.getPreference(this.name)||{};if(f===null){delete e[d]}else{e[d]=f}if(c.isEmptyObject(e)){e=null}acf.setPreference(this.name,e)}})})(jQuery);(function(d){var a=acf.Field.extend({type:"flexible_content",wait:"",events:{'click [data-name="add-layout"]':"onClickAdd",'click [data-name="remove-layout"]':"onClickRemove",'click [data-name="collapse-layout"]':"onClickCollapse",showField:"onShow",unloadField:"onUnload",mouseover:"onHover"},$control:function(){return this.$(".acf-flexible-content:first")},$layoutsWrap:function(){return this.$(".acf-flexible-content:first > .values")},$layouts:function(){return this.$(".acf-flexible-content:first > .values > .layout")},$layout:function(e){return this.$(".acf-flexible-content:first > .values > .layout:eq("+e+")")},$clonesWrap:function(){return this.$(".acf-flexible-content:first > .clones")},$clones:function(){return this.$(".acf-flexible-content:first > .clones  > .layout")},$clone:function(e){return this.$('.acf-flexible-content:first > .clones  > .layout[data-layout="'+e+'"]')},$actions:function(){return this.$(".acf-actions:last")},$button:function(){return this.$(".acf-actions:last .button")},$popup:function(){return this.$(".tmpl-popup:last")},getPopupHTML:function(){var g=this.$popup().html();var e=d(g);var h=this.$layouts();var f=function(i){return h.filter(function(){return d(this).data("layout")===i}).length};e.find("[data-layout]").each(function(){var n=d(this);var l=n.data("min")||0;var i=n.data("max")||0;var k=n.data("layout")||"";var m=f(k);if(i&&m>=i){n.addClass("disabled");return}if(l&&m<l){var p=l-m;var o=acf.__("{required} {label} {identifier} required (min {min})");var j=acf._n("layout","layouts",p);o=o.replace("{required}",p);o=o.replace("{label}",k);o=o.replace("{identifier}",j);o=o.replace("{min}",l);n.append('<span class="badge" title="'+o+'">'+p+"</span>")}});g=e.outerHTML();return g},getValue:function(){return this.$layouts().length},allowRemove:function(){var e=parseInt(this.get("min"));return(!e||e<this.val())},allowAdd:function(){var e=parseInt(this.get("max"));return(!e||e>this.val())},isFull:function(){var e=parseInt(this.get("max"));return(e&&this.val()>=e)},addSortable:function(e){if(this.get("max")==1){return}this.$layoutsWrap().sortable({items:"> .layout",handle:"> .acf-fc-layout-handle",forceHelperSize:true,forcePlaceholderSize:true,scroll:true,stop:function(f,g){e.render()},update:function(f,g){e.$input().trigger("change")}})},addCollapsed:function(){var e=b.load(this.get("key"));if(!e){return false}this.$layouts().each(function(f){if(e.indexOf(f)>-1){d(this).addClass("-collapsed")}})},addUnscopedEvents:function(e){this.on("invalidField",".layout",function(f){e.onInvalidField(f,d(this))})},initialize:function(){this.addUnscopedEvents(this);this.addCollapsed();acf.disable(this.$clonesWrap(),this.cid);this.render()},render:function(){this.$layouts().each(function(e){d(this).find(".acf-fc-layout-order:first").html(e+1)});if(this.val()==0){this.$control().addClass("-empty")}else{this.$control().removeClass("-empty")}if(this.isFull()){this.$button().addClass("disabled")}else{this.$button().removeClass("disabled")}},onShow:function(i,h,g){var f=acf.getFields({is:":visible",parent:this.$el});acf.doAction("show_fields",f)},validateAdd:function(){if(this.allowAdd()){return true}var e=this.get("max");var g=acf.__("This field has a limit of {max} {label} {identifier}");var f=acf._n("layout","layouts",e);g=g.replace("{max}",e);g=g.replace("{label}","");g=g.replace("{identifier}",f);this.showNotice({text:g,type:"warning"});return false},onClickAdd:function(h,g){if(!this.validateAdd()){return false}var i=null;if(g.hasClass("acf-icon")){i=g.closest(".layout");i.addClass("-hover")}var f=new c({target:g,targetConfirm:false,text:this.getPopupHTML(),context:this,confirm:function(k,j){if(j.hasClass("disabled")){return}this.add({layout:j.data("layout"),before:i})},cancel:function(){if(i){i.removeClass("-hover")}}});f.on("click","[data-layout]","onConfirm")},add:function(e){e=acf.parseArgs(e,{layout:"",before:false});if(!this.allowAdd()){return false}var f=acf.duplicate({target:this.$clone(e.layout),append:this.proxy(function(g,h){if(e.before){e.before.before(h)}else{this.$layoutsWrap().append(h)}acf.enable(h,this.cid);this.render()})});this.$input().trigger("change");return f},validateRemove:function(){if(this.allowRemove()){return true}var f=this.get("min");var g=acf.__("This field requires at least {min} {label} {identifier}");var e=acf._n("layout","layouts",f);g=g.replace("{min}",f);g=g.replace("{label}","");g=g.replace("{identifier}",e);this.showNotice({text:g,type:"warning"});return false},onClickRemove:function(h,f){var i=f.closest(".layout");i.addClass("-hover");var g=acf.newTooltip({confirmRemove:true,target:f,context:this,confirm:function(){this.removeLayout(i)},cancel:function(){i.removeClass("-hover")}})},removeLayout:function(g){var e=this;var f=this.getValue()==1?60:0;acf.remove({target:g,endHeight:f,complete:function(){e.$input().trigger("change");e.render()}})},onClickCollapse:function(g,f){var h=f.closest(".layout");if(this.isLayoutClosed(h)){this.openLayout(h)}else{this.closeLayout(h)}},isLayoutClosed:function(e){return e.hasClass("-collapsed")},openLayout:function(e){e.removeClass("-collapsed");acf.doAction("show",e,"collapse")},closeLayout:function(e){e.addClass("-collapsed");acf.doAction("hide",e,"collapse");this.renderLayout(e)},renderLayout:function(g){var h=g.children("input");var f=h.attr("name").replace("[acf_fc_layout]","");var e={action:"acf/fields/flexible_content/layout_title",field_key:this.get("key"),i:g.index(),layout:g.data("layout"),value:acf.serialize(g,f)};d.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(e),dataType:"html",type:"post",success:function(i){if(i){g.children(".acf-fc-layout-handle").html(i)}}})},onUnload:function(){var e=[];this.$layouts().each(function(f){if(d(this).hasClass("-collapsed")){e.push(f)}});e=e.length?e:null;b.save(this.get("key"),e)},onInvalidField:function(f,g){if(this.isLayoutClosed(g)){this.openLayout(g)}},onHover:function(){this.addSortable(this);this.off("mouseover")}});acf.registerFieldType(a);var c=acf.models.TooltipConfirm.extend({events:{"click [data-layout]":"onConfirm",'click [data-event="cancel"]':"onCancel"},render:function(){this.html(this.get("text"));this.$el.addClass("acf-fc-popup")}});acf.registerConditionForFieldType("hasValue","flexible_content");acf.registerConditionForFieldType("hasNoValue","flexible_content");acf.registerConditionForFieldType("lessThan","flexible_content");acf.registerConditionForFieldType("greaterThan","flexible_content");var b=new acf.Model({name:"this.collapsedLayouts",key:function(f,e){var g=this.get(f+e)||0;g++;this.set(f+e,g,true);if(g>1){f+="-"+g}return f},load:function(e){var e=this.key(e,"load");var f=acf.getPreference(this.name);if(f&&f[e]){return f[e]}else{return false}},save:function(e,g){var e=this.key(e,"save");var f=acf.getPreference(this.name)||{};if(g===null){delete f[e]}else{f[e]=g}if(d.isEmptyObject(f)){f=null}acf.setPreference(this.name,f)}})})(jQuery);(function(b){var a=acf.Field.extend({type:"gallery",events:{"click .acf-gallery-add":"onClickAdd","click .acf-gallery-edit":"onClickEdit","click .acf-gallery-remove":"onClickRemove","click .acf-gallery-attachment":"onClickSelect","click .acf-gallery-close":"onClickClose","change .acf-gallery-sort":"onChangeSort","click .acf-gallery-update":"onUpdate",mouseover:"onHover",showField:"render"},actions:{validation_begin:"onValidationBegin",validation_failure:"onValidationFailure",resize:"onResize"},onValidationBegin:function(){acf.disable(this.$sideData(),this.cid)},onValidationFailure:function(){acf.enable(this.$sideData(),this.cid)},$control:function(){return this.$(".acf-gallery")},$collection:function(){return this.$(".acf-gallery-attachments")},$attachments:function(){return this.$(".acf-gallery-attachment")},$attachment:function(c){return this.$('.acf-gallery-attachment[data-id="'+c+'"]')},$active:function(){return this.$(".acf-gallery-attachment.active")},$main:function(){return this.$(".acf-gallery-main")},$side:function(){return this.$(".acf-gallery-side")},$sideData:function(){return this.$(".acf-gallery-side-data")},isFull:function(){var c=parseInt(this.get("max"));var d=this.$attachments().length;return(c&&d>=c)},getValue:function(){var c=[];this.$attachments().each(function(){c.push(b(this).data("id"))});return c.length?c:false},addUnscopedEvents:function(c){this.on("change",".acf-gallery-side",function(d){c.onUpdate(d,b(this))})},addSortable:function(c){this.$collection().sortable({items:".acf-gallery-attachment",forceHelperSize:true,forcePlaceholderSize:true,scroll:true,start:function(d,e){e.placeholder.html(e.item.html());e.placeholder.removeAttr("style")},update:function(d,e){c.$input().trigger("change")}});this.$control().resizable({handles:"s",minHeight:200,stop:function(d,e){acf.update_user_setting("gallery_height",e.size.height)}})},initialize:function(){this.addUnscopedEvents(this);this.render()},render:function(){var c=this.$(".acf-gallery-sort");var e=this.$(".acf-gallery-add");var d=this.$attachments().length;if(this.isFull()){e.addClass("disabled")}else{e.removeClass("disabled")}if(!d){c.addClass("disabled")}else{c.removeClass("disabled")}this.resize()},resize:function(){var d=this.$control().width();var e=150;var c=Math.round(d/e);c=Math.min(c,8);this.$control().attr("data-columns",c)},onResize:function(){this.resize()},openSidebar:function(){this.$control().addClass("-open");var c=this.$control().width()/3;c=parseInt(c);c=Math.max(c,350);this.$(".acf-gallery-side-inner").css({width:c-1});this.$side().animate({width:c-1},250);this.$main().animate({right:c},250)},closeSidebar:function(){this.$control().removeClass("-open");this.$active().removeClass("active");acf.disable(this.$side());var c=this.$(".acf-gallery-side-data");this.$main().animate({right:0},250);this.$side().animate({width:0},250,function(){c.html("")})},onClickAdd:function(d,c){if(this.isFull()){this.showNotice({text:acf.__("Maximum selection reached"),type:"warning"});return}var f=acf.newMediaPopup({mode:"select",title:acf.__("Add Image to Gallery"),field:this.get("key"),multiple:"add",library:this.get("library"),allowedTypes:this.get("mime_types"),selected:this.val(),select:b.proxy(function(g,e){this.appendAttachment(g,e)},this)})},appendAttachment:function(f,e){f=this.validateAttachment(f);if(this.isFull()){return}if(this.$attachment(f.id).length){return}var d=['<div class="acf-gallery-attachment" data-id="'+f.id+'">','<input type="hidden" value="'+f.id+'" name="'+this.getInputName()+'[]">','<div class="margin" title="">','<div class="thumbnail">','<img src="" alt="">',"</div>",'<div class="filename"></div>',"</div>",'<div class="actions">','<a href="#" class="acf-icon -cancel dark acf-gallery-remove" data-id="'+f.id+'"></a>',"</div>","</div>"].join("");var c=b(d);this.$collection().append(c);if(this.get("insert")==="prepend"){var g=this.$attachments().eq(e);if(g.length){g.before(c)}}this.renderAttachment(f);this.render();this.$input().trigger("change")},validateAttachment:function(d){d=acf.parseArgs(d,{id:"",url:"",alt:"",title:"",filename:"",type:"image"});if(d.attributes){d=d.attributes;var c=acf.isget(d,"sizes",this.get("preview_size"),"url");if(c!==null){d.url=c}}return d},renderAttachment:function(e){e=this.validateAttachment(e);var c=this.$attachment(e.id);if(e.type=="image"){c.find(".filename").remove()}else{var d=acf.isget(e,"image","src");if(d!==null){e.url=d}c.find(".filename").text(e.filename)}if(!e.url){e.url=acf.get("mimeTypeIcon");c.addClass("-icon")}c.find("img").attr({src:e.url,alt:e.alt,title:e.title});acf.val(c.find("input"),e.id)},editAttachment:function(d){var c=acf.newMediaPopup({mode:"edit",title:acf.__("Edit Image"),button:acf.__("Update Image"),attachment:d,field:this.get("key"),select:b.proxy(function(f,e){this.renderAttachment(f)},this)})},onClickEdit:function(d,c){var f=c.data("id");if(f){this.editAttachment(f)}},removeAttachment:function(c){this.closeSidebar();this.$attachment(c).remove();this.render();this.$input().trigger("change")},onClickRemove:function(d,c){d.preventDefault();d.stopPropagation();var f=c.data("id");if(f){this.removeAttachment(f)}},selectAttachment:function(g){var f=this.$attachment(g);if(f.hasClass("active")){return}var e=this.proxy(function(){this.$side().find(":focus").trigger("blur");this.$active().removeClass("active");f.addClass("active");this.openSidebar();d()});var d=this.proxy(function(){var h={action:"acf/fields/gallery/get_attachment",field_key:this.get("key"),id:g};if(this.has("xhr")){this.get("xhr").abort()}acf.showLoading(this.$sideData());var i=b.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(h),type:"post",dataType:"html",cache:false,success:c});this.set("xhr",i)});var c=this.proxy(function(i){if(!i){return}var h=this.$sideData();h.html(i);h.find(".compat-field-acf-form-data").remove();h.find("> table.form-table > tbody").append(h.find("> .compat-attachment-fields > tbody > tr"));acf.doAction("append",h)});e()},onClickSelect:function(d,c){var f=c.data("id");if(f){this.selectAttachment(f)}},onClickClose:function(d,c){this.closeSidebar()},onChangeSort:function(h,f){if(f.hasClass("disabled")){return}var i=f.val();if(!i){return}var g=[];this.$attachments().each(function(){g.push(b(this).data("id"))});var d=this.proxy(function(){var e={action:"acf/fields/gallery/get_sort_order",field_key:this.get("key"),ids:g,sort:i};var j=b.ajax({url:acf.get("ajaxurl"),dataType:"json",type:"post",cache:false,data:acf.prepareForAjax(e),success:c})});var c=this.proxy(function(e){if(!acf.isAjaxSuccess(e)){return}e.data.reverse();e.data.map(function(j){this.$collection().prepend(this.$attachment(j))},this)});d()},onUpdate:function(f,d){var g=this.$(".acf-gallery-update");if(g.hasClass("disabled")){return}var c=acf.serialize(this.$sideData());g.addClass("disabled");g.before('<i class="acf-loading"></i> ');c.action="acf/fields/gallery/update_attachment";b.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(c),type:"post",dataType:"json",complete:function(){g.removeClass("disabled");g.prev(".acf-loading").remove()}})},onHover:function(){this.addSortable(this);this.off("mouseover")}});acf.registerFieldType(a);acf.registerConditionForFieldType("hasValue","gallery");acf.registerConditionForFieldType("hasNoValue","gallery");acf.registerConditionForFieldType("selectionLessThan","gallery");acf.registerConditionForFieldType("selectionGreaterThan","gallery")})(jQuery);