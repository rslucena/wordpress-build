(function(a){if(typeof wpcf7==="undefined"||wpcf7===null){return}wpcf7.taggen={};a(function(){a("form.tag-generator-panel").each(function(){wpcf7.taggen.update(a(this))})});a("form.tag-generator-panel").submit(function(){return false});a("form.tag-generator-panel .control-box :input").change(function(){var b=a(this).closest("form.tag-generator-panel");wpcf7.taggen.normalize(a(this));wpcf7.taggen.update(b)});a("input.insert-tag").click(function(){var c=a(this).closest("form.tag-generator-panel");var b=c.find("input.tag").val();wpcf7.taggen.insert(b);tb_remove();return false});wpcf7.taggen.update=function(b){var e=b.attr("data-id");var c="";var d=b.find('input[name="name"]');if(d.length){c=d.val();if(""===c){c=e+"-"+Math.floor(Math.random()*1000);d.val(c)}}if(a.isFunction(wpcf7.taggen.update[e])){return wpcf7.taggen.update[e].call(this,b)}b.find("input.tag").each(function(){var f=a(this).attr("name");if(b.find(':input[name="tagtype"]').length){f=b.find(':input[name="tagtype"]').val()}if(b.find(':input[name="required"]').is(":checked")){f+="*"}var g=wpcf7.taggen.compose(f,b);a(this).val(g)});b.find("span.mail-tag").text("["+c+"]");b.find("input.mail-tag").each(function(){a(this).val("["+c+"]")})};wpcf7.taggen.update.captcha=function(c){var d=wpcf7.taggen.compose("captchac",c);var b=wpcf7.taggen.compose("captchar",c);c.find("input.tag").val(d+" "+b)};wpcf7.taggen.compose=function(h,b){var d=b.find('input[name="name"]').val();var e=b.find(".scope."+h);if(!e.length){e=b}var c=[];e.find("input.option").not(":checkbox,:radio").each(function(j){var k=a(this).val();if(!k){return}if(a(this).hasClass("filetype")){k=k.split(/[,|\s]+/).join("|")}if(a(this).hasClass("color")){k="#"+k}if("class"==a(this).attr("name")){a.each(k.split(" "),function(l,m){c.push("class:"+m)})}else{c.push(a(this).attr("name")+":"+k)}});e.find("input:checkbox.option").each(function(j){if(a(this).is(":checked")){c.push(a(this).attr("name"))}});e.find("input:radio.option").each(function(j){if(a(this).is(":checked")&&!a(this).hasClass("default")){c.push(a(this).attr("name")+":"+a(this).val())}});if("radio"==h){c.push("default:1")}c=(c.length>0)?c.join(" "):"";var i="";if(e.find(':input[name="values"]').val()){a.each(e.find(':input[name="values"]').val().split("\n"),function(j,k){i+=' "'+k.replace(/["]/g,"&quot;")+'"'})}var g=[];a.each([h,d,c,i],function(k,j){j=a.trim(j);if(""!=j){g.push(j)}});g=a.trim(g.join(" "));g="["+g+"]";var f=e.find(':input[name="content"]').val();f=a.trim(f);if(f){g+=" "+f+" [/"+h+"]"}return g};wpcf7.taggen.normalize=function(c){var b=c.val();if(c.is('input[name="name"]')){b=b.replace(/[^0-9a-zA-Z:._-]/g,"").replace(/^[^a-zA-Z]+/,"")}if(c.is(".numeric")){b=b.replace(/[^0-9.-]/g,"")}if(c.is(".idvalue")){b=b.replace(/[^-0-9a-zA-Z_]/g,"")}if(c.is(".classvalue")){b=a.map(b.split(" "),function(d){return d.replace(/[^-0-9a-zA-Z_]/g,"")}).join(" ");b=a.trim(b.replace(/\s+/g," "))}if(c.is(".color")){b=b.replace(/[^0-9a-fA-F]/g,"")}if(c.is(".filesize")){b=b.replace(/[^0-9kKmMbB]/g,"")}if(c.is(".filetype")){b=b.replace(/[^0-9a-zA-Z.,|\s]/g,"")}if(c.is(".date")){if(!b.match(/^\d{4}-\d{2}-\d{2}$/)){b=""}}if(c.is(':input[name="values"]')){b=a.trim(b)}c.val(b);if(c.is(":checkbox.exclusive")){wpcf7.taggen.exclusiveCheckbox(c)}};wpcf7.taggen.exclusiveCheckbox=function(b){if(b.is(":checked")){b.siblings(":checkbox.exclusive").prop("checked",false)}};wpcf7.taggen.insert=function(b){a("textarea#wpcf7-form").each(function(){this.focus();if(document.selection){var d=document.selection.createRange();d.text=b}else{if(this.selectionEnd||0===this.selectionEnd){var e=a(this).val();var c=this.selectionEnd;a(this).val(e.substring(0,c)+b+e.substring(c,e.length));this.selectionStart=c+b.length;this.selectionEnd=c+b.length}else{a(this).val(a(this).val()+b)}}this.focus()})}})(jQuery);