(function(b){if(typeof wpcf7==="undefined"||wpcf7===null){return}b(function(){var d=b("#welcome-panel");var a;a=function(c){b.post(ajaxurl,{action:"wpcf7-update-welcome-panel",visible:c,welcomepanelnonce:b("#welcomepanelnonce").val()})};b("a.welcome-panel-close",d).click(function(c){c.preventDefault();d.addClass("hidden");a(0)});b("#contact-form-editor").tabs({active:wpcf7.activeTab,activate:function(f,c){b("#active-tab").val(c.newTab.index())}});b("#contact-form-editor-tabs").focusin(function(c){b("#contact-form-editor .keyboard-interaction").css("visibility","visible")}).focusout(function(c){b("#contact-form-editor .keyboard-interaction").css("visibility","hidden")});wpcf7.toggleMail2("input:checkbox.toggle-form-table");b("input:checkbox.toggle-form-table").click(function(c){wpcf7.toggleMail2(this)});if(""===b("#title").val()){b("#title").focus()}wpcf7.titleHint();b(".contact-form-editor-box-mail span.mailtag").click(function(c){var f=document.createRange();f.selectNodeContents(this);window.getSelection().addRange(f)});wpcf7.updateConfigErrors();b("[data-config-field]").change(function(){var f=b("#post_ID").val();if(!f||-1==f){return}var c=[];b(this).closest("form").find("[data-config-field]").each(function(){c.push({name:b(this).attr("name").replace(/^wpcf7-/,"").replace(/-/g,"_"),value:b(this).val()})});c.push({name:"context",value:"dry-run"});b.ajax({method:"POST",url:wpcf7.apiSettings.getRoute("/contact-forms/"+f),beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",wpcf7.apiSettings.nonce)},data:c}).done(function(e){wpcf7.configValidator.errors=e.config_errors;wpcf7.updateConfigErrors()})});b(window).on("beforeunload",function(f){var c=false;b('#wpcf7-admin-form-element :input[type!="hidden"]').each(function(){if(b(this).is(":checkbox, :radio")){if(this.defaultChecked!=b(this).is(":checked")){c=true}}else{if(b(this).is("select")){b(this).find("option").each(function(){if(this.defaultSelected!=b(this).is(":selected")){c=true}})}else{if(this.defaultValue!=b(this).val()){c=true}}}});if(c){f.returnValue=wpcf7.saveAlert;return wpcf7.saveAlert}});b("#wpcf7-admin-form-element").submit(function(){if("copy"!=this.action.value){b(window).off("beforeunload")}if("save"==this.action.value){b("#publishing-action .spinner").addClass("is-active")}})});wpcf7.toggleMail2=function(f){var a=b(f);var e=b("fieldset",a.closest(".contact-form-editor-box-mail"));if(a.is(":checked")){e.removeClass("hidden")}else{e.addClass("hidden")}};wpcf7.updateConfigErrors=function(){var e=wpcf7.configValidator.errors;var f={total:0};b("[data-config-field]").each(function(){b(this).removeAttr("aria-invalid");b(this).next("ul.config-error").remove();var c=b(this).attr("data-config-field");if(e[c]){var d=b("<ul></ul>").attr({role:"alert","class":"config-error"});b.each(e[c],function(n,l){var i=b("<li></li>").append(wpcf7.iconInCircle("!")).append(b('<span class="screen-reader-text"></span>').text(wpcf7.configValidator.iconAlt)).append(" ");if(l.link){i.append(b("<a></a>").attr("href",l.link).text(l.message))}else{i.text(l.message)}i.appendTo(d);var m=c.replace(/^mail_\d+\./,"mail.").replace(/\..*$/,"");if(!f[m]){f[m]=0}f[m]+=1;f.total+=1});b(this).after(d).attr({"aria-invalid":"true"})}});b("#contact-form-editor-tabs > li").each(function(){var i=b(this);i.find(".icon-in-circle").remove();var d=i.attr("id").replace(/-panel-tab$/,"");b.each(e,function(l,g){l=l.replace(/^mail_\d+\./,"mail.");if(l.replace(/\..*$/,"")==d.replace("-","_")){var h=wpcf7.iconInCircle("!");i.find("a.ui-tabs-anchor").first().append(h);return false}});var c=b("#"+d+"-panel > div.config-error:first");c.empty();if(f[d.replace("-","_")]){c.append(wpcf7.iconInCircle("!"));if(1<f[d.replace("-","_")]){var j=wpcf7.configValidator.manyErrorsInTab.replace("%d",f[d.replace("-","_")]);c.append(j)}else{c.append(wpcf7.configValidator.oneErrorInTab)}}});b("#misc-publishing-actions .misc-pub-section.config-error").remove();if(f.total){var a=b("<div></div>").addClass("misc-pub-section config-error").append(wpcf7.iconInCircle("!"));if(1<f.total){a.append(wpcf7.configValidator.manyErrors.replace("%d",f.total))}else{a.append(wpcf7.configValidator.oneError)}a.append("<br />").append(b("<a></a>").attr("href",wpcf7.configValidator.docUrl).text(wpcf7.configValidator.howToCorrect));b("#misc-publishing-actions").append(a)}};wpcf7.titleHint=function(){var d=b("#title");var a=b("#title-prompt-text");if(""===d.val()){a.removeClass("screen-reader-text")}a.click(function(){b(this).addClass("screen-reader-text");d.focus()});d.blur(function(){if(""===b(this).val()){a.removeClass("screen-reader-text")}}).focus(function(){a.addClass("screen-reader-text")}).keydown(function(c){a.addClass("screen-reader-text");b(this).unbind(c)})};wpcf7.iconInCircle=function(d){var a=b('<span class="icon-in-circle" aria-hidden="true"></span>');return a.text(d)};wpcf7.apiSettings.getRoute=function(d){var a=wpcf7.apiSettings.root;a=a.replace(wpcf7.apiSettings.namespace,wpcf7.apiSettings.namespace+d);return a}})(jQuery);